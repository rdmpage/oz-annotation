<!DOCTYPE html>
<html>
<head>
	<style>
	
	div {
		padding:10px;
	}
	
	#output {
    font-family:monospace;
    white-space:pre;
	}
	</style>
<head>
<body>

	<div id="data"></div>
	<div id="markup"></div>
	<div id="output"></div>

	<script>
	

	
	var text =  "12\nTran & Yang: New Eotrechus and Rhyacobates from Vietnam\nTAXONOMY\nEotrechus vietnamensis, new species\n(Figs. 1-6, 26)\nMaterial examined. – Holotype (apterous male) and allotype\n(apterous female), Vietnam, Vinh Phuc province, Tam Dao National\nPark, suoi Thac Bac (near Doi Che), 21°27.005'N 105°38.771'E,\n749 m, coll. A. D. Tran & Q. K. Hoang, 17 Jun.2003, TAD0351,\n(ZMHU).\nParatypes: Vietnam: apterous 4 males, 3 females, same locality data\nas holotype; apterous 4 males, 1 female, Vinh Phuc province, Tam\nDao National Park, Suoi Mo, 21°27.103'N 105°38.872'E, 924m, coll.\nA. D. Tran & Q. K. Hoang, 16 Jun.2003, TAD0350; apterous 3\nmales, 2 females, Vinh Phuc province, Tam Dao National Park,\n21°27.747'N 105°38.754'E, 1000m, coll. A. D. Tran & Q. K. Hoang,\n18 Jun.2003, TAD0354; apterous 1 male, macropterous 3 females,\nVinh Phuc province, Tam Dao National Park, 21°27.439'N\n105°39.193'E, 1000m, coll. A. D. Tran & Q. K. Hoang, 18 Jun.2003,\nTAD0355; apterous 5 males, 5 females, Vinh Phuc province, Tam\nDao National Park, Suoi Bua Lon, 600m, coll. A. D. Tran & Q. K.\nHoang, 19 Jun.2003, TAD0356; apterous 5 males, 3 females, Dien\nBien province, Muong Phang, upstream and water fall of Muong\nPhang stream, 21°27.000'N 103°10.548'E, 1070m, coll. A. D. Tran,\n28 Jul.2004, DY0419 (NHMW, ZMHU, and ZRC); apterous 1 male,\nHa Tay province, Ba Vi National Park, small stream, 575 m, coll.\nJ. T. Polhemus, D. A. Polhemus & P. Nguyen, 4 Apr.2000, CL4391;\napterous 1 male, 1 female, Ha Tay province, Ba Vi National Park,\nseeping rock face on upper road, 895 m, coll. J. T. Polhemus, D. A.\nPolhemus & P. Nguyen, 4 Apr.2000, CL4391; apterous 6 males, 5\nfemales, Lao Cai province, roadside seeps, 11 km NE Sa Pa,\n22°23.42'N 103°52.92'E, 1220 m, coll. J. T. Polhemus, D. A.\nPolhemus & P. Nguyen, 7 Apr.2000, CL4396; apterous 2 females,\nLai Chau province, Nam Ceung stream, 15 km N Lai Chau,\n22°08.67'N 103°11.55'E, 207 m, coll. J. T. Polhemus, D. A.\nPolhemus & P. Nguyen, 11 Apr.2000, CL4409; apterous 5 males,\n5 females, Lai Chau province, cascading tributary to Nam Na River,\n12 km N Lai Chau, 22°07.325'N 103°11.50'E, 290 m, coll. J. T.\nPolhemus, D. A. Polhemus & P. Nguyen, 11 Apr.2000, CL4410\n(JTPC).\nDescription. – Apterous male, length 5.5-5.9 (holotype 5.9),\nwidth 1.85-2.07 (holotype 1.97) (n=20); apterous female\nlength 6.3-7.0 (allotype 6.9), width 2.22-2.39 (allotype 2.32)\n(n=14); macropterous female length 7.2-7.8, width 2.20-2.44\n(n=3).\nColour. Apterous form, body mainly brown on dorsal side\nand pale yellow on ventral side (females with two brown\nmarkings on mesosterno-pleura and median brown patches\non metasterno-pleura); dorsal surface covered with silvery\nor greenish pubescence. Head with one median yellow stripe;\nantennae yellow to brown. Pronotum with five longitudinal\nyellow stripes on dorsal and lateral sides. Mesonotum mainly\nyellow with six longitudinal markings: two slender dark\nbrown lateral stripes, two slender dark brown sub-lateral\nstripes and two light brown markings in the centre.\nMetanotum and abdominal tergum mainly dark brown.\nPro-, meso- and meta-sternopleura with dense silvery and\nreflective pubescence. Legs: all coxae, trochanters and femora\nyellow (slightly darker in females), all tibiae and tarsi brown.\nIn macropterous form, anterior part of pronotum with five\nyellow stripes as in apterous form, posterior part totally\nbrown, wings brown.\nStructural characteristics\nApterous male (holotype): Head width across eyes 1.29;\ninterocular width 0.60; eye kidney-shaped on dorsal view,\nlength of eye 0.63. Antennae about 1.2x body length (6.99:\n5.90), lengths of segments 1-4: 1.94: 1.55: 1.46: 2.04; first\nsegment with 2-3 black spine-like hairs in apical part.\nPronotum, broader than long, slightly shorter than head length\n(0.84: 1.16). Lengths of mesosternum and metasternum: 1.97\nand 0.37. Posterior margin of metasternum with a median\nfringe of short black hairs (Fig. 3). Lengths of leg segments\n(femur: tibia: tarsal segment 1: tarsal segment 2) as follows:\nfore leg: 2.43: 1.89: 0.22: 0.32; middle leg: 6.90: 5.10: 0.61:\n0.49; hind leg: 7.20: 5.00: 0.73: 0.49. Fore femur (Fig. 2)\nsimple, length about 6.57x maximum width (2.43: 0.37),\nventral surface with 2 black stout hairs (2-6 hairs in other\nparatypes); fore tibia almost straight, with some long black\nspine-like hairs on apical margin. Middle and hind femur\nslender and slightly longer than the body, with scattered small\nbrown spines. Claws stout, length 0.20. Abdomen relatively\nshort, pregenital length 1.22, with patch of long yellow hairs\non median sterna 1-5. Sternum 7 about 2.25x length of two\npreceding sterna combined (0.61: 0.27), posterior margin with\nvery deep rectangular median notch (about half the length of\nsternum 7) (Fig. 3). Genital segments large, length 0.54,\npygophore broadly suboval, with a pair of disto-lateral\nprocesses, each directed obliquely upwards, plate like, and\nwith slightly pointed apex in lateral view (Figs. 3-4).\nParameres small and blunt.\nApterous female (allotype): slightly bigger than the male.\nHead width across eyes 1.37; interocular width 0.65; eye\nkidney-shaped, length of eye 0.61. Antennae about 0.9x of\nbody length (6.20: 6.90), lengths of segments 1-4: 1.79: 1.41:\n1.16: 1.84; first segment with 2-3 black spines sub-apically.\nPronotum slightly shorter than head length (0.83: 1.16).\nLengths of mesosternum and metasternum: 2.24 and 0.51.\nLengths of leg segments (femur: tibia: tarsal segment 1: tarsal\nsegment 2): fore leg: 2.38: 1.79: 0.24: 0.39; middle leg: 6.80:\n4.80: 0.76: 0.61; hind leg: 6.90: 4.90: 0.83: 0.54. Fore femur\nsimple, length about 7.0x maximum width (2.38: 0.34),\nventral surface with five black stout hairs; fore tibia almost\nstraight with some long black spines on apical margin. Middle\nand hind femur slender and subequal to body length, scattered\nwith small brown spines. Claws stout, length 0.20. Pregenital\nabdominal venter 0.32x body length (2.24: 6.90). Venter of\nsterna 1-6 without patch of long hairs. Sternum 7 about 1.18x\nlength of two preceding sterna together (0.60: 0.51), posterior\nmargin straight. Genital segments not concealed, proctiger\nround and slightly deflected (Fig. 6).\nMacropterous female: similar to apterous female but slightly\nbigger in size. Fore wings distinctly surpassing abdominal\napex. Wing veins as shown in Fig. 5.\nMacropterous male unknown.\nEtymology. – This species is named after its country of origin.\nDistribution & habitat. – Northern Vietnam (Vinh Phuc, Ba\nVi, Lai Chau, Dien Bien, and Lao Cai provinces). Eotrechus\n\f";
 
 
text =       "27\nContributions to Zoology, 83 (1) – 2014\nManatuto District, Laclubar, 8° 44’ 47” S, 125° 54’\n54” E, alt. 1030 m. Secondary forest (AM C.476937, 3\nwet); Viqueque District, lower slopes of Mt. Laritame,\nabove Lari-Gutu, near Uaguia, 8° 41’ 30” S, 126° 23’\n17” E, alt. 1180 m. Primary forest on limestone, under\nrocks (AM C.472974, 1 wet, AM C.472975, 1 wet), Mt.\nLaritame, 8° 41’ 28” S, 126° 23’ 19” E, alt. 1200 m.\nPrimary rainforest on limestone, on ground (AM\nC.471257, 4 dry, 5 wet), Mt. Laritame, 8° 41’ 24” S, 126°\n23’ 23” E, alt. 1300 m. Primary rainforest on limestone,\non ground (AM C.478011, 3 dry, 2 wet), 2.9 km S of\nLoihuno, 8° 48’ 33” S, 126° 22’ 52” E, alt. 165 m. Teak\nplantation, on trees (AM C.472958, 1 wet, AM C.474120,\n5 dry); Lautem District, 1.5 km SW of Com, 8° 21’ 54”\nS, 127° 03’ 04” E, alt. 165 m. Secondary vine thicket\non limestone, lantana, on trees and lantana (AM\nC.468722, 1 wet), 5 km SW of Com, near Kampung\nPipileti, 8° 22’ 32” S, 127° 00’ 56” E, alt. 454 m. Sec-\nondary vine thicket on limestone, lantana, on ground\n(AM C.468761, 6 dry, 7 wet) , 6.2 km SW of Com, 8°\n23’ 19” S, 127° 00’ 39” E, alt. 495 m. Secondary vine\nthicket on limestone, lantana (AM C.468722, 1 wet),\nPoros, Kakaru, 8° 24’ 51” S, 127° 07’ 37” E, alt. 400\nm. Primary and secondary rainforest on limestone, in\nrock piles (AM C.476995, 2 dry), Maca-Kuru near\nPoros, ca. 7 km W of Mehara, 8° 24’ 53” S, 127° 07’\n37” E. Rainforest on lower, steep limestone slopes,\nunder large rocks (AM C.473031, 2 wet, AM C.474113,\n2 dry, AM C.474133, 2 dry), Fuiloro Plateau, ca. 800 m\nW of Ira-Unu, 5.7 km N of Fuiloro, 8° 23’ 28” S, 127°\n00’ 12” E, alt. 552 m. Patches of primary vine thicket\non limestone, in talus and crevices of large boulders\n(AM C.473039, 3 wet, AM C.474112, 9 dry).\nEtymology. Derived from ‘herculeus’ (Latin = hercu-\nlean), in reference to its large size, adjective.\nDescription. Shell (Figs 8F-I, 9C-D, Tables 4-5). Large\n(D = 27 – 36 mm), broadly subglobose with low spire;\n4.0 to 4.8 whorls, last whorl slightly to moderately\nangulated at periphery, separated by shallow suture,\nteleoconch smooth except for axial growth lines, no\nperiostracal setae or hair scars, glossy; umbilicus nar-\nrowly open, partly concealed by reflection of aperture;\naperture simple, ovate, with well expanded, well re-\nflected lip, parietal wall inconspicuous; not banded,\ncolour uniform hornish brown to dark brown, outer lip\nhorn to brown.\n\t Genital anatomy (Fig. 10B). Penis very short, penial\nwall thin, inner penial wall with regularly arranged,\nlongitudinal rows of pustulations; epiphallus four to five\ntimes longer than penis, with very thick wall, proxi-\nmally extending into penis as tube, epiphallic flagellum\nmoderate in length, epiphallic lobe extremely long,\ninner epiphallic wall with numerous, fine longitudinal\npilasters comprising entire length of epiphallus, extend-\ning distally into flagellum, flagellum with corrugated\npilasters.\nComparative remarks. Shell not banded, larger and\nbroader than most species, differs from P. argilacea by\nabsence of periostracal setae; closely similar with P.\nmanuelmendesi n. sp., which tends to be thicker and\nlighter in colour; P. mundoperdidi n. sp. is similarly\nlarge but differs conspicuously by strong angulation of\nlast whorl. Shells of all remaining species are signifi-\ncantly smaller, with more tightly coiled whorls. Differs\nfrom other species by combination of very short penis,\ninner penial wall sculpture of regularly arranged pos-\ntulation, extremely long epiphallus and epiphallic lobe.\nParachloritis sylvatica n. sp.\nMaterial examined\nHolotype. AM C.477779 (Timor-Leste, Lautem Dis-\ntrict, Valu Sere, 5 km ESE of Tutuala, 8° 24’ 33” S,\n127° 17’ 54” E, alt. 24 m. Coastal vine thicket on lime-\nstone, under bark, on trees; coll. V. Kessner, 8 Dec 2010),\ndissected specimen (Fig. 11A).\nParatypes. Same as holotype (AM C.468723, 2 wet;\nAM C.473021, 8 wet, AM C.474118, 5 dry, coll. V.\nKess­\nner, Z. Afranio, 21 May 2011), Valu Sere, 8° 24’\n34” S, 127° 17’ 56” E, alt. 3 m. Tall rainforest / second-\nary vegetation on limestone, on trees (AM C.471252,\n10 wet, coll. V. Kessner, 26 May 2012).\nNon-type material. Timor-Leste, Baucau District, W\nof Matebian Mountains, Lawaliu near Desa Quelicai,\n8° 35’ 27” S, 126° 33’ 11” E, alt. 698 m. Secondary\nvegetation, gardens, on steep slopes (AM C.478042, 7\ndry, 6 wet), 3.9 km S of Mulia, road to Quelicai, 8° 31’\n13” S, 126° 33’ 39” E, alt. 220 m. Acacia and tamarind\ndominated savannah, on trees, under rocks (AM\nC.478027, 6 dry, 12 wet), Hills above Laga, 08° 29’ 06”\nS, 126° 37’ 10” E, alt. 200 m. Patches of dense Acacia\non grassy slopes, on trees (AM C.477778, 2 wet);\nViqueque District, Wai-eu-Lau near Usu Decima, 8°\n44’ 36” S, 126° 22’ 50” E. On trees in gardens (AM\nC.472959, 3 wet); Lautem District, Poros, 8° 24’ 58”\nS, 127° 08’ 20” E, alt. 342 m. Large fig trees and sec-\nondary vegetation, limestone, under bark, on trees (AM\nC.471031, 16 wet), Himacaldi-ara, Tutuala, 8° 23’ 57”\n\f";



text = "The description is based on specimens collected during January from the River Nile in the Republic of Sudan (see type data). The specimens are deposited in The Natural History Museum London (BMNH) and in the Africamuseum in Tervuren (MRAC). Measurements and counts follow Tshibwabwa & Teugels (1995), with supplementary measurements of body depth at the beginning of the dorsal fin. Besides materials examined within this study, I refer to measurements and counts as listed in Reid (1985) and Tshibwabwa & Teugels (1995). Additional x-rays were performed for the type series of the new species. Comparative materials exam- ined are: L. ansorgii Boulenger, 1907 BMNH 1907.6.29.210, 1 specimen, Dongoena Swamps, Cuene River, Angola; L. brachypoma Günther, 1868 BMNH 1866.3.8.13–15, 3 specimens, Lagos, Nigeria; L. camerunen- sis Trewavas, 1974 BMNH 1973.5.14.322–323, 2 specimens, Wowe River, Mungo system, Cameroon; L. coubie Rüppel, 1832 BMNH 1862.6.17.132–139, 7 specimens, Nile River, Khartoum, Republic of Sudan; BMNH 2005.4.18.112–113, 1 specimen, mouth of Alibori River (Niger basin), Benin; BMNH 2006.4.17.28–";


text = `Syntypes: USNM 907 (2) [vagrans]
Holotype: SMF 17179
Holotype: AMNH 93842 [carmenensis]
Holotype: AMNH 93915 [cuitzeoensis]
Holotype: AMNH 93966 [diluvialis]
Holotype: AMNH 87550 [insperatus]
Holotype: CAS-SUR 4032, USNM 965 [megalops]
Holotype: AMNH 87543 [obscurus]
Holotype: AMNH 93937 [patzcuaroensis]
Holotype: AMNH 96691 [scotti]
Holotype: AMNH 89792, a young adult male, collected by Walter Auffenberg, William W. Milstead, Donald W. Tinkle, and Robert G. Webb, 21 August 1962; paratypes: BYU [virgatenuis]
Holotype: USNM 46336, female; paraypes: FMNH
Holotype: USNM 166423, adult female
Holotype: MNHN-RA 1894.0094
Holotype: MVZ 5428, adult female
Lectotype: BMNH 1946.1.21.81 (designated by ROSSMAN & BURBRINK 2005)
Syntypes: USNM 894, 5496, 329498; ANSP 6522
Holotype: UTA R-12482, an adult male; collected 8 June 1983 by J. A. Campbell.
Syntypes: ANSP 6563 (fide Malnate 1971: 368), USNM 844 (holotype fide Cochran 1961: 182)
Syntypes: MNHN-RA 1172 and MNHN-RA 2012.0457 (formerly MNHN-RA 1172A) [praeocularis]
Syntypes ZMB 1996, 1946, 51781
Holotype: FMNH 100016, male [canescens]`;


/*
text = `Holotype: AMNH 57512 from Palmer Junction, Fly River, Western Province [angusticinctus]
Holotype: BPBM 36185 (figs. 2, 3), a juvenile female, collected by Allen Allison in March 2010.
Holotype: AMNH 85745
Holotype: BMNH 1946.1.7.55
Holotype: unlocated (not in ANSP type list), a 1670 mm specimen (Blanding) (fide V. Wallach, pers. comm.)
Syntype: ZMH R04376 (formerly no. 339), Formerly there were 2 syntypes.
Lectotype: ZMB 6122, designated by BRYGOO 1985.
Holotype: MNHN-RA 7635
Holotype: MCZ 36862. Paratypes: USNM.
Holotype: BMNH 1947.3.4.79
Holotype: MCZ 34340 [angusta]`;
*/

/*
text = `Neonella colalao new species (Figs. 7-10)
Hoiotype.—Male from Argentina, Tucu- man Province: San Pedro de Colalao (4 km W road to Hualinchay), November 1994 (M. J. Ramirez) (# 9556 MACN).
Etymology.—A noun in apposition, after the type locality.
Diagnosis.— colalao differs from`;
*/

text = `Lachnagrostis aemula 
New Guinea: 1 g - Sugarloaf complex along the Wapu River, PNG, 2896 m, 
13.vii.1960, Hoogland & Schodde 7052 (L0837046); 2g - Wilhelmina-top, WNG, 
3560 m, ix.1938, Brass &Meyer-Drees 9821 (L0837063); 3g - Wilhelmina-top, WNG, 
3700 m, ix.1938. Brass & Meyer-Drees 10116 (L0837061);4g - Wilhelmina-top, WNG, 
3650 m, ix.1938, Brass & Meyer-Drees 9969 (L0837062); 5g - Mt Trikora, WNG, 3450 
m, 17.viii.1984, Mangen 1107 (L0837059); 6g - Mt Albert Edward, PNG, 3680 m, 
v.1938, Brass 4400 (AQ226576); 7g - McNicoll-Andabare Plateau, PNG, [2600 m], 
22.viii.1960, Robbins 3336 (CANB87706a); 8g - Mt Sugarloaf grasslands, PNG, 2896 
m, 29.vi.1960, Robbins2761 (CANB87781). Australia: la - Namadgi Nat. Park, NSW, 
1175 m, 13.xii.2013, Walsh 8119 (MEL2378431); 2a - Nundle to Crawney Pass, NSW, 
720 m, 6xii.1996, Hosking 1377 (MEL303346); 3a - Queanbeyan to Williamsdale 
railway easement, ACT, 745 m, 13.xi.1996, Crawford4006 (MEL2212073); 4a - Sheba 
Dam, NSW, 1153 m, 5.xii.2009, Hosking 3287& Brown (MEL2366247); 5a - Mt 
Gingera, ACT, 1855 m, 1711958, Burbridge5611 (MEL1576691); 6a - Dandenong 
Ranges, Vic, 305 m, 30.xi.1957, Muir274 (MEL1055530); 7a - Metung Rd, Lakes 
Entrance, Vic, [62 m], 27.xi.1960, Muir 1975 (MEL1055531); 8a - Newry Hill Climb, Vic, 
[78 m], 21 .x.1984, BeaugleholeACB78705 (MEL1533249); 9a - Langwarrin Railway 
Station, Vic, [78 m], 28.xi.1978, Corrick6206 (MEL1509861 ); 1 0a - Mt Buffalo J , Vic 
[671 m], 19.xi.1987, Beauglehole ACB92328 (MEL1590071 ). `;

/*

BHL - https://www.biodiversitylibrary.org/page/51214439
BioStor - http://biostor.org/reference/253594 (p. 43)
Work cited by GBIF specimen, e.g. https://www.gbif.org/occurrence/1090977324
MNHN knows about this link, even though codes dn't match (maybe done via station)

*/

text = `remains attached to the teleoconchs, unlike the genus 
Caecum. They have a coiled protoconch followed by an 
uncoiled stage forming a more or less twisted tube. The 
teleoconch is almost always separated from the uncoiled 
protoconch by a ring-like varix. Just after the separating 
varix the teleoconch usually shows microsculpture ab- 
sent on both the early and late protoconch. 
Parastrophia cf. cormicopiae (Folin, 1869) 
(Fig. 16D-G) 
Moreletia cormicopiae Folin, 1869b: p. 122, pi. 15, figs 7-9. 
Parastrophia filum Melvill, 1906: p. 80, pi. 8, fig. 27. 
Parastrophia cormicopiae Moore, 1976: p. 19 (not figured). 
Type material 
Moreletia cormicopiae Folin, 1869, 3 syntypes MNFIN n. 
24917 (lectotype herein selected. Fig. 16F, G). 
Type locality 
Hong Kong. 
Material examined 
The type material and Spirolidium sumatranum Thiele, 
1925, holotype ZMB/Moll-108515, (Fig. 16H, I); Paras- 
trophia filum Melvill, 1906, holotype NHMUK 1906.10.23.47 
(Fig. 16M, N); Bathus 1, 1993, New Caledonia: Stn DW 
674, 105-110 m, 1 sh; Exp. Montrouzier Sept. '93, New 
Caledonia, Touho Sector East coast: Stn 1260, 49-59 m, 6 
sh; Stn 1261, 45-56 m, 2 sh; Exp. Montrouzier Oct. '93, 
New Caledonia, Koumac Sector NW: Stn 1298, 2-4 m, 1 
sh; Stn 1299, 12-14 m, 1 sh; Santo Marine Biodiversity 
Survey 2006, Vanuatu Islands: Stn FB 61, 2-3 m, 1 sh. 
Additional material 
Only one lot (sh) from New Caledonia (Noumea). 
Additional description 
Teleoconch smooth, except for a few growth lines; just 
after the thin separating varix, the diameter of the tube 
rapidly expands up to half of its length, then gradually 
decreases a little, reaching the aperture. Most of the
specimens show a scar near the aperture, which is sim- 
ple, circular, oblique and slightly contracted. Dimen- 
sions of the New Caledonian shells: length 3.2 mm; 
min. diam. 0.1 mm, max. diam. 0.6 mm. 
Distribution 
Known only from Hong Kong, New Caledonia and 
Vanuatu Islands. 
Remarks 
All the examined specimens are devoid of the embry- 
onic portion. We are dubious about the statements by 
Moore (1976) and Hugues (1985a), who consider Paras- 
trophia sumatrana (Thiele, 1925) a junior synonym of 
Parastrophia cormicopiae. Primarily because there is clear- 
ly a dyscrasia in the shape of abapical portion of the
tube of P. cormicopiae, and moreover not corresponding 
to the lectotype, herein selected (Fig. 16F), and the orig- 
inal illustration (pi. 15, fig. 7), depicting an adult speci- 
men. Secondly because the dimensions of the lectotype 
do not allow us to establish the exact point of the nar- 
rowing of the tube as in P. sumatrana (Fig. 16H, I). Fur- 
thermore, the other two syntypes of P. cormicopiae are 
too immature and not integral, therefore it is impossible 
to give a documented opinion on them. For the time 
being, in absence of evidence, we consider P. sumatrana 
(Thiele, 1925) as a valid species. On the contrary, in our 
opinion P. filum Melvill, 1906 (Fig. 16M, N) is a junior 
synonym of P. cormicopiae, having the same shape of 
both tube and apertural end. Furthermore, we were un- 
able to see the "concentric spiral striation" in the holo- 
type of P. filum which was focused on by Melvill. 
Parastrophia melanesiana n. sp. 
(Fig. 16J-L) 
Holotype (sh) MNHN 24882 and 18 paratypes (sh) 
MNHN 24883 from type locality; Musorstom 10, 1998, 
Fiji Islands: 6 paratypes (sh) MNHN 24884 Stn DW 
1333, 200-215 m; 2 paratypes (one broken) (sh) MNHN 
24885 Stn DW 1376, 497-504 m; 4 paratypes (sh) MNHN 
24886 Shi DW 1384, 260-305 m; 1 paratype (sh) MNHN 
24887 Stn CP 1354, 959-963 m; 1 paratype (sh) MNHN 
24888 Stn CP 1363, 144-150 m; 6 paratypes (sh) MNHN 
24889 Stn CP 1366, 149-168 m, 149-168 m; 2 paratypes 
(sh) MNHN 24890 Stn CP 1369, 392-433 m. 
Musorstom 10, 1998, Fiji Islands: Shi DW 1381, S of Viti 
Levu, 18°17.8'S, 177°54.4'E, 275-430 m. 
The type material and P. filum Melvill, 1906, holotype 
NHMUK 1906.10.23.47 (Fig. 16M, N); P. japónica Hi- 
noide & Habe, 1978, holotype, NSMT-Mo 55474 (Fig. 
16S); 2 paratypes NSMT-Mo 55475, 55476. 
Only two lots (all sh) from the Philippine Islands (MP) 
and Papua - New Guinea (BR); P. cygnicollis (Hedley, 
1904), Western Australia, NE Rottnest Island, in coarse 
sand grunge at low tide among rocks. Leg. G.T. Watters 
(BR) (Fig. 160). 
Tube bi-sinuous, very thin and tapering. Coiled proto- 43 
Type material 
Type locality 
Material examined 
Additional material 
Description 
The family Caecidae in the South-West Pacific (Gastropoda: Rissooidea)`;

//----------------------------------------------------------------------------------------
// javascript
var WHITESPACE_CHARS = ' \f\n\r\t\u00a0\u0020\u1680\u180e\u2028\u2029\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000';

function normalizeWhitespace(text) {
  var reWhitespace = new RegExp('[' + WHITESPACE_CHARS + ']+', 'g');
  return text.replace(reWhitespace, ' ');
}

//----------------------------------------------------------------------------------------
function do_match(annotations) {
	annotations.debug_html = '';

	var iterator = new RegExp(annotations.pattern, "gm");

    while (match = iterator.exec(text)) {
    	
    	console.log(JSON.stringify(match));
    	
        var matched = {};
        var n = match.length;

        matched.pre = match[1];
        matched.mid = match[2];
        matched.post = match[n - 1];

        matched.start = match.index + matched.pre.length;
        matched.end = matched.start + matched.mid.length;
        
        if (!annotations.open_annotations[matched.start]) {
        	annotations.open_annotations[matched.start] = [];
        }
        annotations.open_annotations[matched.start].push(matched);

        if (!annotations.close_annotations[matched.end]) {
        	annotations.close_annotations[matched.end] = [];
        }
        annotations.close_annotations[matched.end].push(matched);
                
        console.log(JSON.stringify(matched));
        
        annotations.debug_html += JSON.stringify(matched) + '<br />';
        
        annotations.matches.push(matched);
    
    }
    
    return annotations;
}

//----------------------------------------------------------------------------------------
function degrees_to_decimal(data) {
  result = data.degrees;
  if (data.minutes) {
    result += data.minutes / 60.0;
  }
  if (data.seconds) {
    result += data.seconds / 3600.0;
  }

  if (data.hemisphere == 'S') {
    result *= -1.0;
  }
  if (data.hemisphere == 'W') {
    result *= -1.0;
  }
  return result;
}

//----------------------------------------------------------------------------------------
function do_lat_lon(annotations) {
	annotations.debug_html = '';
	
	var patterns = [
'(.{0,32})\\b((\\d+)[°|º|o|\\(]\\s*(\\d+(\\.\\d+)?)[\'|’|′|´|#]\\s*((\\d+(\\.\\d+)?)(?:"|\'\'|’’|”|″|´´))?\\s*([S|N])[,|-]?\\s*(\\d+)[°|º|o|\\(]\\s*(\\d+(\\.\\d+)?)[\'|’|′|´|#]\\s*((\\d+(\\.\\d+)?)(?:"|\'\'|’’|”|″|´´))?\\s*([W|E]))(.{0,32})'
	
	];
	
	for (var i in patterns) {

		var iterator = new RegExp(patterns[i], "igm");

		while (match = iterator.exec(text)) {
		
			console.log(JSON.stringify(match));
		
			var matched = {};
			var n = match.length;

			matched.pre = match[1];
			matched.mid = match[2];
			matched.post = match[n - 1];

			matched.start = match.index + matched.pre.length;
			matched.end = matched.start + matched.mid.length;
			
			// compute point
			var latitude = {};
			latitude.degrees = parseFloat(match[3]);
			latitude.minutes = (match[4] ? parseFloat(match[4]) : 0);
			latitude.seconds = (match[7] ? parseFloat(match[7]) : 0);
			latitude.hemisphere = match[9];

			var longitude = {};
			longitude.degrees = parseFloat(match[10]);
			longitude.minutes = (match[11] ? parseFloat(match[11]) : 0);
			longitude.seconds = (match[13] ? parseFloat(match[13]) : 0);
			longitude.hemisphere = match[16];

			matched.latitude = degrees_to_decimal(latitude);
			matched.longitude = degrees_to_decimal(longitude);
			
			
			// html debug
		
			if (!annotations.open_annotations[matched.start]) {
				annotations.open_annotations[matched.start] = [];
			}
			annotations.open_annotations[matched.start].push(matched);

			if (!annotations.close_annotations[matched.end]) {
				annotations.close_annotations[matched.end] = [];
			}
			annotations.close_annotations[matched.end].push(matched);
				
			console.log(JSON.stringify(matched));
		
			annotations.debug_html += JSON.stringify(matched) + '<br />';
		
			annotations.matches.push(matched);
	
		}
	}	
    return annotations;
}

//----------------------------------------------------------------------------------------
function do_specimens(annotations) {
	annotations.debug_html = '';

	
	var INSTITUTION_CODE 					= '([A-Z]{2,10}(-[A-Z]{1,3})?|QM|BM|BM\\(NH\\))';
	var CATALOGUE_NUMBER_PREFIX				= '([A-Z][\\.|\\-]?)?';
	var CATALOGUE_NUMBER					= CATALOGUE_NUMBER_PREFIX + '[0-9]{3,}((\\.\\d+)+)?';
	var CATALOGUE_NUMBER_SUFFIX_DELIMITER	= '(\\-|–|­|—|\\.)';
	var CATALOGUE_NUMBER_SUFFIX				= '[0-9]{1,}';
	
	patterns = [
	'\\b' + INSTITUTION_CODE + '\\s*' + CATALOGUE_NUMBER_PREFIX + CATALOGUE_NUMBER + '(' + CATALOGUE_NUMBER_SUFFIX_DELIMITER + CATALOGUE_NUMBER_SUFFIX +')?',
	'#\\s+\\d+\\s+[A-Z]+',
	];
	

	
	
	for (var i in patterns) {
	
		//alert(patterns[i]);
	
		var pattern = "(.{0,8})(" + patterns[i] + ")(.{0,8})";

		var iterator = new RegExp(pattern, "gm");

		while (match = iterator.exec(text)) {
		
			console.log(match.index + ' - ' + iterator.lastIndex + ' - ' + text.length);
		
		
			console.log(JSON.stringify(match));
		
			var matched = {};
			var n = match.length;

			matched.pre = match[1];
			matched.mid = match[2];
			matched.post = match[n - 1];

			matched.start = match.index + matched.pre.length;
			matched.end = matched.start + matched.mid.length;
			
			// by default next match can't overlap a previous match, work around
			// this by changing lastIndex so that next match can overlap post part of match.
			// see https://stackoverflow.com/a/20835462
			if (iterator.lastIndex < text.length ) {
				iterator.lastIndex = matched.end;
//				iterator.lastIndex -= 5;
			}

			
			// html debug
		
			if (!annotations.open_annotations[matched.start]) {
				annotations.open_annotations[matched.start] = [];
			}
			annotations.open_annotations[matched.start].push(matched);

			if (!annotations.close_annotations[matched.end]) {
				annotations.close_annotations[matched.end] = [];
			}
			annotations.close_annotations[matched.end].push(matched);
				
			console.log(JSON.stringify(matched));
		
			annotations.debug_html += JSON.stringify(matched) + '<br />';
		
			annotations.matches.push(matched);
	
		}
	}	
    return annotations;
}


	document.getElementById('data').innerHTML=text;
	
	// clean text
	text = normalizeWhitespace(text);
	
	
	/*
	Inputs:
		1: block of text, e.g. BHL OCR or PDF pdftotext
		2: JSON structure, e.g. Google OCR format
		3: XML(?) 
	*/
	
	
	
	
	
	
	// string
	var target = 'Eotrechus';
	target = 'province';
	target = 'National Park';	
	target = '([A-Z]\\w+ )?([A-Z]\\w+ )province';
	
	// specimens
	 // AM C.476937
	target = '([A-Z]{2,}\\s*([A-Z]\\.)?\\d+)';
	
	
	// Search pattern to match text, include before and after	
	var annotations = {};
	annotations.text = text;
	annotations.pattern = '';
	annotations.matches = [];
	annotations.open_annotations = [];
	annotations.close_annotations = [];
	
	annotations.debug_html = '';
	
	annotations.pattern = "(.{0,32})(" + target + ")(.{0,32})";
	
	
	// get annotations
	//annotations = do_match(annotations);
	
	//annotations = do_lat_lon(annotations);
	
	annotations = do_specimens(annotations);
	

    
    // output as annotations in JSON-LD
    
    
    // output as HTML for debugging
    var html = '';
    var n = text.length;
    for (var i = 0; i < n; i++) {
    
    	if (annotations.open_annotations[i]) {
    		for (var j in annotations.open_annotations[i]) {
    			html += '<span style="background:yellow;">';
    		}
    	}
    	
  		if (annotations.close_annotations[i]) {
    		for (var j in annotations.close_annotations[i]) {
    			html += '</span>';
    		}
    	}    	
    	html += text.charAt(i);
	}
    document.getElementById('markup').innerHTML=html;

    document.getElementById('output').innerHTML=annotations.debug_html;
    
    
    /*
    // canvas size
	var canvas_width = 2008;
	var canvas_height = 2917;
    
    
 	// map matches to blocks in OCR
 	
 	var annotations = [];

 	var hits = [];
 	
 	for (var i in matches) {
 		var blocks = [];
 		
 		var hit = {};
 		
 		hit.annotations = [];
 		
 		var pos = -1;
 		
 		for (var j = matches[i].start; j <= matches[i].end; j++) {
 			
 			var char_to_block = string_to_blocks[j];
 			
 			if (char_to_block != pos) {
 			
 				// List for this hit
 				hit.annotations.push(char_to_block);
 				
 				
 				// Next block of code could be view in CouchDB that generates annotations for every block in OCR txt
 				
 				// represent block as annotation  							
				var word = text_blocks[char_to_block];						
				var box = block_to_canvas_xywh(word.boundingBox, canvas_width, canvas_height);
				
				var annotation = {};
				annotation['@id'] = 'annotation id';
				annotation['@type'] = 'oa:Annotation';
				annotation.motivation = 'sc:painting';
				
				if (word.text) {
					annotation.resource = {};
					annotation.resource['@type'] = 'cnt:ContentAsText';
					annotation.resource.chars = word.text;					
				}
				
				annotation.on = {};
				annotation.on['@type'] = 'oa:SpecificResource';
				
				annotation.on.selector = [];					
				
				var fragment_selector = {};				
				fragment_selector['@type'] = 'oa:FragmentSelector';
 				fragment_selector.value = 'xywh=' + box.join();				
 				annotation.on.selector.push(fragment_selector);

				var position_selector = {};				
				position_selector['@type'] = 'oa:TextPositionSelector';
 				position_selector.start = j;
 				position_selector.end = j + word.text.length;	
 				annotation.on.selector.push(position_selector);

				// => oa:source
				annotation.on.full = 'URI for canvas';
 				
 				annotations.push(annotation);
 				
 				// update pos
 				pos = char_to_block;
 			}
 			
 		
 			//console.log(j + ' ' + string_to_blocks[j]);
 			
 			//console.log(text_blocks[string_to_blocks[j]].text);
 		
 		
 		}
 		
 		console.log(JSON.stringify(hit));
 		
 		
 		
 	
 	
 	}
 	console.log(JSON.stringify(annotations, null, 2));
 	*/
 	
 	/*
	$n = count($results);
	for ($i = 0; $i < $n; $i++)
	{
		foreach ($results[$i]->range as $charpos)
		{
			echo $charpos . ' ' . $string_to_blocks[$charpos] . "\n";
			
			$word = $text_blocks[$string_to_blocks[$charpos]];
						
			$box = block_to_canvas_xywh($word->boundingBox, $canvas_width, $canvas_height);
			
			$annotation = new stdclass;

			// could be a b-node
			//$annotation->{'@id'} = 
			
			$annotation->{'@type'} = 'oa:Annotation';
			$annotation->motivation = 'sc:painting';
			

			if (isset($word->text))
			{
				$annotation->resource = new stdclass;
				$annotation->resource->{'@type'} = 'cnt:ContentAsText';
				$annotation->resource->chars = $word->text;
			}
			
			$annotation->on = new stdclass;
			$annotation->on->{'@type'} = 'oa:SpecificResource';
			$annotation->on->selector = new stdclass; // eventually an array
			$annotation->on->selector->{'@type'} = 'oa:FragmentSelector';
			$annotation->on->selector->value = 'xywh=' . join(',', $box);
			
			$annotation->on->full = 'https://www.biodiversitylibrary.org/page/57913211';

			print_r($annotation);
			
echo "\n";
echo json_encode($annotation, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);
echo "\n";
			

			
		}
	
	} 
	*/	
	

	
	</script>

</body>
</html>